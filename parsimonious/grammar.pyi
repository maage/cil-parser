# SPDX-FileCopyrightText: 2021 Erik Rose
#
# SPDX-License-Identifier: MIT

from collections import OrderedDict
from parsimonious.exceptions import BadGrammar as BadGrammar, UndefinedLabel as UndefinedLabel
from parsimonious.expressions import Literal as Literal, Lookahead as Lookahead, Not as Not, OneOf as OneOf, OneOrMore as OneOrMore, Optional as Optional, Regex as Regex, Sequence as Sequence, TokenMatcher as TokenMatcher, ZeroOrMore as ZeroOrMore, expression as expression
from parsimonious.nodes import NodeVisitor as NodeVisitor
from parsimonious.nodes import Node
from parsimonious.utils import evaluate_string as evaluate_string
from six import text_type
from typing import (
    Any,
    NoReturn,
    Tuple,
)
import typing

class Grammar(OrderedDict[Any, Any]):
    default_rule: Any = ...
    def __init__(self, rules: str = ..., **more_rules: Any) -> None: ...
    def default(self, rule_name: Any) -> Node: ...
    def parse(self, text: Any, pos: int = ...) -> Node: ...
    def match(self, text: Any, pos: int = ...) -> Node: ...

class TokenGrammar(Grammar): ...
class BootstrappingGrammar(Grammar): ...

rule_syntax: str

class LazyReference(text_type):
    name: str = ...

class RuleVisitor(NodeVisitor):
    quantifier_classes: Any = ...
    visit_expression: Any = ...
    visit_term: Any = ...
    visit_atom: Any = ...
    custom_rules: Any = ...
    def __init__(self, custom_rules: Optional = ...) -> None: ...
    def visit_parenthesized(self, node: Node, parenthesized: Any) -> Node: ...
    def visit_quantifier(self, node: Node, quantifier: Any) -> str: ...
    def visit_quantified(self, node: Node, quantified: Any) -> Node: ...
    def visit_lookahead_term(self, node: Node, lookahead_term: Any) -> Lookahead: ...
    def visit_not_term(self, node: Node, not_term: Any) -> Not: ...
    def visit_rule(self, node: Node, rule: Any) -> Node: ...
    def visit_sequence(self, node: Node, sequence: Any) -> Sequence: ...
    def visit_ored(self, node: Node, ored: Any) -> OneOf: ...
    def visit_or_term(self, node: Node, or_term: Any) -> Node: ...
    def visit_label(self, node: Node, label: Any) -> str: ...
    def visit_reference(self, node: Node, reference: Any) -> LazyReference: ...
    def visit_regex(self, node: Node, regex: Any) -> Regex: ...
    def visit_spaceless_literal(self, spaceless_literal: Any, visited_children: Any) -> Literal: ...
    def visit_literal(self, node: Node, literal: Any) -> Literal: ...
    def generic_visit(self, node: Node, visited_children: Any) -> Any: ...
    def visit_rules(self, node: Node, rules_list: Any) -> Tuple[OrderedDict[str, Node], typing.Optional[str]]: ...

class TokenRuleVisitor(RuleVisitor):
    def visit_spaceless_literal(self, spaceless_literal: Any, visited_children: Any) -> TokenMatcher: ...
    def visit_regex(self, node: Node, regex: Any) -> NoReturn: ...

rule_grammar: Any
